import json
import os

FILENAME = "favorites.json"

# Load existing data if file exists
def load_data():
    if os.path.exists(FILENAME):
        with open(FILENAME, "r") as file:
            try:
                return json.load(file)
            except json.JSONDecodeError:
                return {}
    return {}

# Save data to JSON file
def save_data(data):
    with open(FILENAME, "w") as file:
        json.dump(data, file, indent=4)

# Add new record
def add_record(favorites):
    name = input("Enter name: ").strip().title()
    fruit = input("Enter favorite fruit: ").strip().lower()
    color = input("Enter favorite color: ").strip().lower()
    city = input("Enter favorite city: ").strip().lower()

    favorites[name] = {
        "fruit": fruit,
        "color": color,
        "city": city
    }

    save_data(favorites)
    print("\nRecord added successfully!\n")

# View all saved records
def view_all(favorites):
    if not favorites:
        print("\nNo records found.\n")
        return

    print("\n--- All Saved Favorites ---")
    for name, details in favorites.items():
        print(f"Name: {name}")
        print(f"  Fruit : {details['fruit']}")
        print(f"  Color : {details['color']}")
        print(f"  City  : {details['city']}")
        print("---------------------------")
    print()

# Search for a specific name
def search_record(favorites):
    name = input("Enter name to search: ").strip().title()

    if name in favorites:
        details = favorites[name]
        print(f"\nRecord found for {name}:")
        print(f"  Fruit : {details['fruit']}")
        print(f"  Color : {details['color']}")
        print(f"  City  : {details['city']}\n")
    else:
        print(f"\nNo record found for {name}\n")

# MAIN PROGRAM LOOP
def main():
    favorites = load_data()

    while True:
        print("==== Personal Favorites Manager ====")
        print("1. Add new favorite")
        print("2. View all favorites")
        print("3. Search by name")
        print("4. Exit")

        choice = input("Choose an option (1-4): ").strip()

        if choice == "1":
            add_record(favorites)
        elif choice == "2":
            view_all(favorites)
        elif choice == "3":
            search_record(favorites)
        elif choice == "4":
            print("\nExiting program... Goodbye!")
            break
        else:
            print("\nInvalid choice. Please enter 1â€“4.\n")

if __name__ == "__main__":
    main()
